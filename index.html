<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>FPC Sistema V18</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f1c3f">
    <link rel="icon" type="image/png" href="logo-fpc.png">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script>
        if (!window.location.search.includes('v=18')) {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(function(regs) {
                    for(let reg of regs) reg.unregister();
                });
            }
            window.location.replace(window.location.href.split('?')[0] + '?v=18');
        }
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Montserrat', sans-serif; background-color: #0f1c3f; color: white; width: 100vw; min-height: 100vh; overflow-x: hidden; }
        
        /* ANIMAÇÃO DE VIDA NO APP */
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .container { flex: 1; background: linear-gradient(180deg, #0f1c3f 0%, #000 120%); padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }

        /* HEADER */
        .logo-circle { width: 110px; height: 110px; background: white; border-radius: 50%; border: 4px solid #fdd000; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; box-shadow: 0 0 30px rgba(253, 208, 0, 0.3); }
        .logo-circle img { width: 100%; height: 100%; object-fit: contain; transform: scale(1.3); }

        /* BOTÕES VIVOS */
        .submenu-btn {
            width: 100%; background: rgba(255,255,255,0.07); padding: 18px; margin-bottom: 12px;
            border-radius: 15px; display: flex; align-items: center; border: 1px solid rgba(255,255,255,0.1); 
            border-left: 6px solid #fdd000; cursor: pointer; animation: slideIn 0.4s ease-out;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: 0.2s;
        }
        .submenu-btn:active { background: rgba(255,255,255,0.2); transform: scale(0.98); }
        .submenu-btn i { font-size: 1.7rem; color: #fdd000; margin-right: 18px; width: 35px; text-align: center; }
        .submenu-btn h4 { font-size: 0.95rem; text-transform: uppercase; font-weight: 800; color: #fff; }

        /* TABS */
        .tabs-container { width: 100%; display: flex; margin-bottom: 20px; background: rgba(255,255,255,0.05); border-radius: 10px; padding: 5px; }
        .tab-btn { flex: 1; padding: 12px 5px; text-align: center; font-size: 0.7rem; font-weight: 900; color: #aaa; border: none; background: none; cursor: pointer; transition: 0.3s; }
        .tab-btn.active { color: #0f1c3f; background: #fdd000; border-radius: 8px; }

        /* PAGINAS */
        .page { display: none; width: 100%; flex-direction: column; align-items: center; }
        .page.active { display: flex; animation: slideIn 0.3s ease-out; }

        /* CARDS */
        .event-card { background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; border-left: 6px solid #00c753; margin-bottom: 15px; width: 100%; }
        .event-card.future { border-left: 6px solid #fdd000; }
        .status-badge { background: #009640; color: white; padding: 4px 10px; border-radius: 10px; font-size: 0.7rem; font-weight: bold; float: right; }

        .btn-primary { width: 100%; height: 55px; background: #fdd000; color: #0f1c3f; border: none; border-radius: 12px; font-weight: 900; text-transform: uppercase; margin-top: 15px; }
        .btn-outline { width: 100%; height: 55px; background: transparent; border: 2px solid #fdd000; color: #fdd000; border-radius: 12px; font-weight: 900; margin-top: 15px; }
        
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .dash-item { background: rgba(255,255,255,0.08); border-radius: 20px; padding: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; align-items: center; aspect-ratio: 1; justify-content: center; animation: slideIn 0.5s ease-out; }
        .dash-item i { font-size: 2.2rem; color: #fdd000; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="container">

        <div id="pg-login" class="page active">
            <div class="header" style="text-align:center; margin-top:30px;">
                <div class="logo-circle" style="margin: 0 auto 15px;"><img src="logo-fpc.png"></div>
                <h1>F.P.C.</h1>
                <p style="color:#fdd000; font-weight:bold; font-size:0.8rem;">FEDERAÇÃO PERNAMBUCANA</p>
            </div>
            <div class="form-box" style="width:100%; margin-top:30px;">
                <input type="tel" id="login-cpf" placeholder="CPF" style="width:100%; height:55px; border-radius:12px; border:1px solid #333; background:rgba(255,255,255,0.05); color:white; padding: 0 15px; margin-bottom:15px;" oninput="maskCPF(this)">
                <input type="password" id="login-pass" placeholder="SENHA" style="width:100%; height:55px; border-radius:12px; border:1px solid #333; background:rgba(255,255,255,0.05); color:white; padding: 0 15px; margin-bottom:15px;">
                <button class="btn-primary" onclick="login()">ENTRAR</button>
                <button class="btn-outline" onclick="mudarTela('pg-register')">CADASTRAR</button>
            </div>
        </div>

        <div id="pg-dash" class="page">
            <div style="width:100%; display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
                <h2>Olá, <span id="user-name" style="color:#fdd000;">Atleta</span></h2>
                <i class="fas fa-power-off" style="color:#e30613; font-size:1.5rem;" onclick="location.reload()"></i>
            </div>
            <div class="dash-grid">
                <div class="dash-item" onclick="abrirSubmenu('Downhill')"><i class="fas fa-mountain"></i><b>DOWNHILL</b></div>
                <div class="dash-item" onclick="abrirSubmenu('Speed')"><i class="fas fa-tachometer-alt"></i><b>SPEED</b></div>
                <div class="dash-item" onclick="abrirSubmenu('MTB')"><i class="fas fa-biking"></i><b>MTB</b></div>
                <div class="dash-item" onclick="abrirSubmenu('BMX')"><i class="fas fa-bicycle"></i><b>BMX</b></div>
            </div>
        </div>

        <div id="pg-submenu" class="page">
            <h2 id="sub-title" style="margin: 20px 0; color:#fdd000;">MODALIDADE</h2>
            
            <div class="form-box" id="submenu-options">
                </div>

            <button class="btn-outline" onclick="mudarTela('pg-dash')">VOLTAR</button>
        </div>

        <div id="pg-events-list" class="page">
            <h2 style="margin:20px 0; color:#fdd000;">ETAPAS 2026</h2>
            <div class="form-box" id="events-container" style="width:100%;"></div>
            <button class="btn-outline" onclick="mudarTela('pg-submenu')">VOLTAR</button>
        </div>

        <div id="pg-event-detail" class="page">
            <h3 id="detail-title" style="margin:20px 0; color:#fdd000;">ETAPA</h3>
            
            <div class="tabs-container">
                <button class="tab-btn active" id="btn-info" onclick="switchTab('tab-info')">INFO</button>
                <button class="tab-btn" id="btn-cat" onclick="switchTab('tab-cat')">CATEGORIAS</button>
                <button class="tab-btn" id="btn-tempo" onclick="switchTab('tab-tempo')">TEMPO</button>
                <button class="tab-btn" id="btn-insc" onclick="switchTab('tab-insc')">INSCRIÇÃO</button>
            </div>

            <div id="tab-info" class="tab-content active" style="width:100%;">
                <div style="background:rgba(255,255,255,0.05); padding:20px; border-radius:15px;">
                    <p><b>Local:</b> <span id="detail-local"></span></p>
                    <p><b>Data:</b> <span id="detail-data"></span></p>
                    <p style="margin-top:15px; color:#00ff6a;"><i class="fas fa-shield-alt"></i> Seguro Atleta Incluso</p>
                </div>
            </div>

            <div id="tab-cat" class="tab-content" style="width:100%;">
                <div id="cbc-list" style="background:rgba(255,255,255,0.05); padding:15px; border-radius:15px; font-size:0.8rem;">
                    </div>
            </div>

            <div id="tab-tempo" class="tab-content" style="width:100%;">
                <div style="text-align:center; padding:40px 20px;">
                    <i class="fas fa-stopwatch" style="font-size:3rem; color:#aaa; margin-bottom:15px;"></i>
                    <p>Os tempos serão publicados logo após o término da prova.</p>
                </div>
            </div>

            <div id="tab-insc" class="tab-content" style="width:100%;">
                <div style="background:rgba(255,255,255,0.1); padding:20px; border-radius:15px; text-align:center;">
                    <p>Valor: <b>R$ 120,00</b></p>
                    <button class="btn-primary" onclick="alert('Gerando PIX...')">PAGAR INSCRIÇÃO</button>
                </div>
            </div>

            <button class="btn-outline" style="margin-top:30px;" onclick="mudarTela('pg-events-list')">VOLTAR</button>
        </div>

        <div id="pg-register" class="page">
            <h2 style="margin:20px 0;">NOVA CONTA</h2>
            <div class="form-box" style="width:100%;">
                <input type="text" id="reg-nome" placeholder="NOME COMPLETO" style="width:100%; height:50px; border-radius:10px; border:1px solid #333; background:rgba(255,255,255,0.05); color:white; padding: 0 15px; margin-bottom:10px;">
                <input type="date" id="reg-nasc" style="width:100%; height:50px; border-radius:10px; border:1px solid #333; background:rgba(255,255,255,0.05); color:white; padding: 0 15px; margin-bottom:10px;">
                <input type="tel" id="reg-cpf" placeholder="CPF" style="width:100%; height:50px; border-radius:10px; border:1px solid #333; background:rgba(255,255,255,0.05); color:white; padding: 0 15px; margin-bottom:10px;" oninput="maskCPF(this)">
                <input type="password" id="reg-pass" placeholder="SENHA" style="width:100%; height:50px; border-radius:10px; border:1px solid #333; background:rgba(255,255,255,0.05); color:white; padding: 0 15px; margin-bottom:10px;">
                <button class="btn-primary" onclick="registrar()">SALVAR</button>
                <button class="btn-outline" onclick="mudarTela('pg-login')">VOLTAR</button>
            </div>
        </div>

    </div>

    <script>
        const eventsDB = [
            { id: 1, local: "Ouricuri-PE", data: "25/26 de Abril", status: "Aberto" },
            { id: 2, local: "Caruaru-PE", data: "16/17 de Maio", status: "Futuro" },
            { id: 3, local: "Gravatá-PE", data: "19/20 de Setembro", status: "Futuro" },
            { id: 4, local: "Santa Cruz-PE", data: "29/30 de Agosto", status: "Futuro" }
        ];

        let currentUser = null;
        let currentMod = "";

        function mudarTela(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function abrirSubmenu(mod) {
            currentMod = mod;
            document.getElementById('sub-title').innerText = mod.toUpperCase();
            const container = document.getElementById('submenu-options');
            
            let html = `
                <div class="submenu-btn" onclick="switchTab('tab-cat'); abrirCategorias()">
                    <i class="fas fa-list-ul"></i>
                    <div><h4>Categorias CBC</h4><span>Tabela de Idades</span></div>
                </div>
                <div class="submenu-btn" onclick="alert('Seguro Atleta Ativo')">
                    <i class="fas fa-shield-alt"></i>
                    <div><h4>Seguro Atleta</h4><span>Cobertura FPC</span></div>
                </div>
                <div class="submenu-btn" onclick="switchTab('tab-tempo'); abrirCategorias()">
                    <i class="fas fa-stopwatch"></i>
                    <div><h4>Tempo / Resultados</h4><span>Ranking Online</span></div>
                </div>
            `;

            // CALENDÁRIO APENAS NO DOWNHILL
            if(mod === 'Downhill') {
                html = `
                    <div class="submenu-btn" onclick="abrirCalendario()">
                        <i class="far fa-calendar-alt"></i>
                        <div><h4>Calendário / Inscrição</h4><span>Etapas 2026</span></div>
                    </div>
                ` + html;
            }

            container.innerHTML = html;
            mudarTela('pg-submenu');
        }

        function abrirCalendario() {
            const container = document.getElementById('events-container');
            container.innerHTML = "";
            eventsDB.forEach(ev => {
                container.innerHTML += `
                    <div class="event-card ${ev.status==='Futuro'?'future':''}" onclick="detalheEvento(${ev.id})">
                        <span class="status-badge" style="background:${ev.status==='Futuro'?'#fdd000':'#009640'}; color:${ev.status==='Futuro'?'#000':'#fff'};">${ev.status}</span>
                        <h3>${ev.local}</h3>
                        <p>${ev.data}</p>
                    </div>
                `;
            });
            mudarTela('pg-events-list');
        }

        function detalheEvento(id) {
            const ev = eventsDB.find(e => e.id === id);
            document.getElementById('detail-title').innerText = ev.local.toUpperCase();
            document.getElementById('detail-local').innerText = ev.local;
            document.getElementById('detail-data').innerText = ev.data;
            switchTab('tab-info');
            mudarTela('pg-event-detail');
        }

        function abrirCategorias() {
            const list = document.getElementById('cbc-list');
            list.innerHTML = `
                <p><b>Categorias ${currentMod} 2026:</b></p><br>
                <p>Junior: Até 18 anos</p>
                <p>Sub-30: 19 a 29 anos</p>
                <p>Master A: 30 a 39 anos</p>
                <p>Master B: 40 a 49 anos</p>
                <p>Master C: 50 a 59 anos</p>
                <p>Master D: 60+ anos</p>
            `;
            if(currentMod === 'Downhill') mudarTela('pg-event-detail');
            else mudarTela('pg-event-detail'); // No Speed/MTB cai no detail mas sem calendario
        }

        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id.split('-')[1]).classList.add('active');
        }

        function login() {
            const cpf = document.getElementById('login-cpf').value;
            const db = JSON.parse(localStorage.getItem('fpc_banco_oficial')) || [];
            const user = db.find(u => u.cpf === cpf);
            if(user) {
                document.getElementById('user-name').innerText = user.nome.split(' ')[0];
                mudarTela('pg-dash');
            } else alert('Usuário não encontrado');
        }

        function registrar() {
            const nome = document.getElementById('reg-nome').value;
            const cpf = document.getElementById('reg-cpf').value;
            const db = JSON.parse(localStorage.getItem('fpc_banco_oficial')) || [];
            db.push({nome, cpf});
            localStorage.setItem('fpc_banco_oficial', JSON.stringify(db));
            alert('Sucesso!'); mudarTela('pg-login');
        }

        function maskCPF(i){i.value=i.value.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2");}
    </script>
</body>
</html>
